function Firework(a, b, c) {
    this.ctx = a, this.w = b, this.h = c, this.pos = {
        x: b / 2,
        y: c / 2
    }, this.color = {
        h: 0,
        s: 1,
        l: .5
    }, this.duration = 2e3, this.num = 18, this.particles = [], this.speed = 6, this.size = 4, this.pre_time = (new Date).getTime(), this.cur_time = this.pre_time, this.time = 0, this.init = function(a, b, c, d, e) {
        this.pos = a ? a : this.pos, this.color = b ? b : this.color, this.duration = c ? c : this.duration, this.num = d ? d : this.num, this.speed = e ? e : this.speed;
        for (var f = d3.scaleLinear().domain([0, this.num - 1]).range([.5 * Math.PI, 2.5 * Math.PI]), g = 0; g < this.num; g++) {
            var h = f(g),
                i = Math.cos(h),
                j = Math.sin(h),
                k = new Victor(i, j);
            k.normalize(), this.particles.push({
                x: this.pos.x,
                y: this.pos.y,
                vx: k.x * this.speed,
                vy: k.y * this.speed
            })
        }
    }, this.update = function() {
        this.cur_time = (new Date).getTime(), this.time += this.cur_time - this.pre_time, this.pre_time = this.cur_time;
        for (var a = this.particles.length - 1; a >= 0; a--)
            this.particles[a].vy -= .2, this.particles[a].x += this.particles[a].vx, this.particles[a].y -= this.particles[a].vy
    }, this.render = function() {
        for (var b = this.particles.length - 1; b >= 0; b--) {
            var c = this.particles[b].x,
                d = this.particles[b].y,
                e = this.getColorString();
            a.beginPath(), a.fillStyle = e, a.arc(c, d, this.size, 0, 2 * Math.PI), a.fill()
        }
    }, this.getColorString = function() {
        var a = 360 * this.color.h,
            b = 100 * this.color.s,
            c = 100 * this.color.l;
        return "hsl(" + a + "," + b + "%," + c + "%)"
    }
}
